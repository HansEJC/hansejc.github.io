<!DOCTYPE HTML>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5QF2LGP');</script>
<!-- End Google Tag Manager -->
<html>
  <head>
    <title>Help</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="Help" />
    <meta name="keywords" content="Help" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link rel="stylesheet" href="css/main-style.css"/>
    <script defer src="js/init.js"></script>
    <script defer id="MathJax-script" async
      src="js/ext/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
  </head>
  <body class="left-sidebar">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5QF2LGP"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- Header -->
    <div id="header">
      <div class="topnav" id="myTopnav"></div>
      <!-- Logo -->
      <div id="logo">
        <h1><a href="#">Help</a></h1><br>
      </div>
    </div>
    <!-- Main -->
    <div id="main" class="container">
      <div class="row 50%">
        <div>
          <!-- Content -->
          <div id="content" style="max-width:70ch">
            <header id="#"><hr>
              <h1>Contents</h1>
            </header>
            <div class="row 50%">
              <div><ol>              
                <li><a href='#dobble'>Dobble</a></li>
                <li><a href='#csv'>CSV Plotter</a></li>
                <li><a href='#relay'>Distance Protection Fault Plotter</a></li>
                <li><a href='#earth'>Earthing Calculation Tools</a></li>
                <li><a href='#soil'>Earthing Surveys</a></li>
                <li><a href='#tools'>Electrical Engineering Tools</a></li>
                <li><a href='#emc'>EMC Calculations</a></li>
                <li><a href='#fault'>Railway Faults</a></li>
                <li><a href='#railvolts'>Railway Voltages</a></li>
                <p><b>Note.</b><br> If a page is not working for you, it's probably because an update has broken your cached version.
                  To fix this, refresh the cache by pressing <b>Ctr+Shift+R</b>.
                </p>
              </ol></div>
            </div>
            <ol>
              <li><header id="dobble"><hr>
                <h1>Dobble</h1></li>
              </header>
              <div class="row 50%">
                <p> This game can be played by one or two players. You can only get a high score in one player mode. Try to find a matching symbol
                  between the reference and player card. Every card has one match. Click on the match to gain a point and receive a new card.
                  If you click on the wrong match, one point will be deducted. This is to avoid cheating by spamming click. 
                  <a href="https://www.petercollingridge.co.uk/blog/mathematics-toys-and-games/dobble/">The math used to create this game
                  can be found here</a>.
                </p>
              </div></li>
              <li><header id="csv"><hr>
                <h1>CSV Plotter</h1>
              </header>
              <div class="row 50%">
                <p> There are two modes, "Process Upload" and "CSV Formatted". The default mode is to process the upload. This converts all the csv information
                  into an array. All text is removed from the array. If empty spaces are needed, make sure to write "null" in the csv. Everything other than numbers
                  is removed when processing the data. Rolling averages can be used by entering a number in the input box that appears while hovering.
                  <br><br>The Start date option can be used to create an x axis with custom dates. The rate can be chosen to match the
                  original dates in the csv. The original dates usually don't survive the processing, due to so many different formats existing for dates.
                  <br><br>The enable equations options is used for data manipulation. Every column of data is represented by a letter. The default shows just the letters, "a", "b", "c", etc.
                  Equations can be applied to individual columns. For example "a*b" will multiply the first two columns. Any form of javascript math can be applied to
                  the columns. For more information about javascript equations see the <a href="https://www.w3schools.com/js/js_math.asp">W3school's JavaScript Math Object Tutorial</a>.

                <br><br> When using "CSV Formatted":<br>
                  For the csv file to load correctly, delete all unneeded rows and columns. The first row can be left to be used as labels. The other rows
                  have to only contain numbers to work. All columns must be the same width.
                </p>
              </div></li>
              <li><header id="relay"><hr>
                <h1>Distance Protection Fault Plotter</h1>
              </header>
              <div class="row 50%">
                <p>  Using Easergy / S1 Agile, open the disturbance record data. Go to "Files" > "Save As" > "CSV Format" > "Vector Values (RMS & Ang)".
                  For the csv file to load correctly, delete all unneeded rows and columns containing letters. The uploaded csv file must only contain
                  four columns of data with no labels. The first column must contain the "Vcat-RMS" data, the second column the "Vcat-Ang",
                  the third column the "Icat-RMS" data, and the fourth column the "Icat-Ang".<br><br>
                  To plot secondary values to primary values, select the secondary radio button and input the VT and CT ratios in the advanced section.
                  Some relay disturbance record display and export the records using secondary values. If this is the case, select the secondary DR
                  radio button. The fault sample time can be used to calculate in what zone the relay tripped. The default sample time is of 1 ms, but
                  other sample times are also used. The sample time can be found in the disturbance record data.
                </p>
              </div></li>
              <li><header id="earth"><hr>
                <h1>Earthing Calculation Tools</h1>
              </header>
              <div class="row 50%">
                <p>  The calculations used for this page have been extracted from <a href="http://www.dcode.org.uk/assets/uploads/ENA_ER_S34_Issue_2__2018_.pdf">Engineering Recommendation EREC S34</a> and
                  <a href="https://www.ena-eng.org/ENA-Docs/D0C3D1R/TS_41-24_181106101835.pdf">Technical Specification 41-24</a>.
                </p>
              </div></li>
              <li><header id="soil"><hr>
                <h1>Earthing Surveys</h1>
              </header>
              <div class="row 50%">
                <ol>
                <p>  This page can be used to document the results of Soil Resistivity and Fall of Potential surveys. Enter the test location to save
                  the results with the specified site name.
                  <li><b>Soil Resistivity</b><br></li>
                  Enter the soil resistance values and check that the soil resistivity values are consistent.
                  Soil resistivity can be tested using the Wenner test as described in section 10.2.2 of BS 7430 and below.
                  Drive four equally spaced test electrodes to a depth of not greater 5% of their spacing apart.
                  Pass current between the two outer electrodes. Measure the earth potential between the two inner electrodes.
                  The resistance R should be taken as the ratio of the voltage between the inner electrodes and the current between the outer electrodes.
                  In homogenous soil the average resistivity ρ in ohm metres (Ωm) may be taken as: <b>ρ = 2π a R</b>.
                  <br><br>Where:<br>
                  a is the spacing between electrodes, in metres (m)<br>
                  R is the resistance measured between the middle electrodes, in ohms (Ω)<br><br>
                  See the figure below to get a better idea.<br>
                  <img alt="Soil Resistivity" class="helpImg" src="images/soil-resistivity.svg" style="max-width:600px; width:90vw; max-height:360px; height:54vw; display: block; margin-left: auto; margin-right: auto;"/>
                  <br><li><b>Fall of Potential</b></li>
                  The outer test electrode, or current test stake, is driven into the ground 30 to 50 metres away from the earth system,
                  and the inner electrode, or voltage test stake, is then driven into the ground mid-way between the earth electrode and the current
                  test stake, and in a direct line between them.<br><br>
                  The Fall of Potential method can be adapted slightly for use with medium sized earthing systems. This adaptation is often referred to as the 62% Method,
                  as it involves positioning the inner test stake at 62% of the earth electrode-to-outer stake separation. When using this method, it is also advisable to
                  repeat the measurements with the inner test stake moved ±10% of the earth electrode-inner test stake separation distance. If these two additional
                  measurements are in agreement with the original measurement, within the required level of accuracy, then the test stakes have been correctly positioned
                  and the DC resistance figure can be obtained by averaging the three results. There is a label which shows if the results of the 62% test are valid or not.
                  See the figure below to get a better idea.
                  <img class="helpImg" alt="Fall of Potential" src="images/fall-of-potential.svg" style="max-width:400px; max-height:270px; width:90vw; height:61vw; display: block; margin-left: auto; margin-right: auto;"/>
                </p></ol>
              </div></li>
              <li><header id="tools"><hr>
                <h1>Electrical Engineering Tools</h1>
              </header>
              <div class="row 50%">
                <p><a href="downloads/Polar Addition.xlsx">Polar Additions</a>
                </p>
              </div></li>
              <li><header id="emc"><hr>
                <h1>EMC Calculations</h1>
              </header>
              <div class="row 50%">
                <p> The electric fields get mostly blocked out by solid and conductive objects.
                The links below contain the references for the equations and very useful information about electric and magnetic fields. 
                </p>
                <ol>
                  <li><a href="https://www.nationalgrid.com/sites/default/files/documents/13791-Electric%20and%20Magnetic%20Fields%20-%20The%20facts.pdf">ENA Facts</a></li>
                  <li><a href="https://folk.uio.no/arntvi/LowFreqFields2.pdf">Very informative on low frequency fields</a></li>
                  <li><a href="http://www.emfs.info/sources/transport/trains/">EMF from electric trains</a></li>
                  <li><a href="http://www.emfs.info/limits/limits-organisations/icnirp-1998/">Limits stated in the International Commission on Non-Ionizing Radiation Protection (ICNIRP)</a></li>
                  <li><a href="http://www.dcode.org.uk/assets/uploads/ENA_ER_P24_Issue_1__1990_.pdf">Railway capacitance p.39</a></li>
                  <li><a href="https://nepis.epa.gov/Exe/ZyPDF.cgi/9100FL3V.PDF?Dockey=9100FL3V.PDF">Electric field equation p. 7</a></li>
                  <li><a href="https://www.ijareeie.com/upload/2015/august/87_Analytical.pdf">Electric field equation alternative reference</a></li>
                  <li><a href="https://www.softschools.com/formulas/physics/magnetic_field_formula/343/">Magnetic field equation</a></li>
                  <li><a href="http://www.emfs.info/wp-content/uploads/2014/07/Howtocalculatethemagneticfieldfromathree.pdf">Magnetic field equation alternative reference</a></li>
                  <li><a href="http://www.emfs.info/what/measuring/finite/">Effect of finite length on magnetic field calculations</a></li>
                  <li><a href="http://www.emfs.info/what/measuring/">Information about calculations</a></li>
                </ol>
              </div></li>
              <li><header id="fault"><hr>
                <h1>Railway Faults</h1>
              </header>
              <div class="row 50%">
                <p> The railway faults page was put together using a bunch of made of equations and basic electrical engineering principles. The following variables were used
                  for the calculations:
                </p>
                <ul style="padding: 0 0 0 3em; list-style-type: none; zoom:1; line-height:1.8em">
                  <li>I<sub>F</sub></li>
                  <li>I<sub>S</sub></li>
                  <li>K<sub>RR</sub></li>
                  <li style="padding: 0 0 1.8em 0">K<sub>T</sub></li>                
                  <li>L<sub>BT</sub></li>
                  <li>L<sub>C</sub></li>
                  <li>L<sub>S</sub></li>
                  <li style="padding: 0 0 1.8em 0">L<sub>XB</sub></li>               
                  <li>L<sub>XBP</sub></li>
                  <li>V<sub>S</sub></li>
                  <li>Z<sub>AEW</sub></li>
                  <li>Z<sub>ATF</sub></li>
                  <li>Z<sub>BT</sub></li>
                  <li>Z<sub>CAT</sub></li>
                  <li>Z<sub>CW</sub></li>
                  <li>Z<sub>DEP</sub></li>
                  <li>Z<sub>F</sub></li>
                  <li>Z<sub>OLE</sub></li>
                  <li>Z<sub>R</sub></li>
                  <li>Z<sub>RET</sub></li>
                  <li>Z<sub>RSC</sub></li>
                  <li>Z<sub>S</sub></li>
                </ul>
                <ul style="padding: 0 0 0 1em; list-style-type: none; zoom:1; line-height:1.8em">
                  <li>Fault Current </li>
                  <li>Source Fault Current </li>
                  <li>1 for single rail return, 2 for DRR</li>
                  <li>Number of tracks minus 1</li>
                  <li>(If one track, this is set to infinite)</li>
                  <li>Distance Between BTs</li>
                  <li>Current Location</li>
                  <li>Distance between substations</li>
                  <li>Cross Bonding Distance</li>
                  <li>(if L<sub>XB</sub> = 0 or L<sub>XB</sub> > L<sub>S</sub> then L<sub>XB</sub> is set to L<sub>S</sub>)</li>
                  <li>Distance since last Cross Bond</li>
                  <li>System Voltage</li>
                  <li>AEW Impedance</li>
                  <li>ATF Impedance</li>
                  <li>BT Impedance</li>
                  <li>Catenary Impedance</li>
                  <li>Contact Wire Impedance</li>
                  <li>Departing Impedance</li>
                  <li>Fault Impedance</li>
                  <li>Z<sub>CAT</sub> // Z<sub>CW</sub></li>
                  <li>Rail Impedance</li>
                  <li>Return Impedance</li>
                  <li>RSC Impedance</li>
                  <li>Source Impedance</li>
                </ul>
                <p>
                  Source Impedance:<br>
                  $$ Z_S = {V_S \over I_S} $$

                  OLE Impedance:<br>
                  $$ Z_{OLE} = \left({1 \over Z_{CAT}} + {1 \over Z_{CW}}\right)^{-1} $$

                  <br>Depart Impedance (OLE impedance to fault):<br>
                  $$ {Z_{DEP} =} \left({1 \over Z_{OLE} \times L_C} + \left({Z_{OLE} \times L_S \over K_T} + Z_{OLE} \times (L_S - L_C) \right)^{-1} \right)^{-1} $$

                  <br>The current location (L<sub>C</sub>) is reset to 0 at each substation. The distance between the substation (L<sub>S</sub>) changes after each substation. The impedance once
                  the current location (L<sub>C</sub>) reaches the substation distance (L<sub>S</sub>) is added to the impedance of the next calculated section.<br><br>

                  Return Impedance:<br>
                  $$ {Z_{RET} =} \left({1 \over Z_R \times L_{XBP}} + \left( \left({K_{RR} \times K_T \over Z_R \times L_{XB}} + {1 \over Z_{AEW} \times L_{XB}} + {1 \over Z_{RSC} \times L_{XB}} \right)^{-1} + Z_R \times (L_{XBP} - L_{XB}) \right)^{-1} \right)^{-1} $$

                  <br>The distance since last cross bond (L<sub>XBP</sub>) is reset to 0 at each cross bond. The impedance once the distance since last cross bond (L<sub>XBP</sub>)
                  reaches the cross bond distance (L<sub>XBP</sub>) is added to the impedance of the next calculated section.<br><br>

                  Fault Impedance:<br>
                  $$ Z_F = Z_{DEP} + Z_{RET} + Z_S $$

                  Fault Current:<br>
                  $$ I_F = {V_S \over Z_F}  $$
                </p>
              </div></li>
              <li><header id="railvolts"><hr>
                <h1>Railway Voltages</h1>
              </header>
              <div class="row 50%">
                <p> Like the railway faults tab, this was also put together using a bunch of made of equations and basic electrical engineering principles. 
                  The calculations are a continuation of the equations in the previous section. The fault current from the previous equation is used to calculate
                  the railway voltages. To get the voltage of the rail, the calculated current is multiplied by the return impedance. This return impedance has 
                  to take the return impedance via earth into account. This impedance path is via the rail leakage to earth, as well as the mast connections. <br><br>
                  The following variables were needed, in addition to the previous variables in the above section. 
                </p>
                <ul style="padding: 0 0 0 3em; list-style-type: none; zoom:1; line-height:1.8em">
                  <li>L<sub>M</sub></li>
                  <li>V<sub>R</sub></li>
                  <li>Z<sub>ER</sub></li>
                  <li>Z<sub>M</sub></li>
                  <li>Z<sub>MT</sub></li>
                </ul>
                <ul style="padding: 0 0 0 1em; list-style-type: none; zoom:1; line-height:1.8em">
                  <li>Distance between OLE masts</li>
                  <li>Rail Voltage</li>
                  <li>Earth Return Impedance</li>
                  <li>Mast Impedance</li>
                  <li>Mast Impedance Paralleled</li>
                </ul>
                <p>
                  I've currently attempted to calculate the rail voltages three different ways. The calculations for these attempts are below.<br><br>

                  Rail Voltage (without the masts):<br>
                  $$ V_R = I_F \times \left({1 \over Z_{RET}} + {1 \over Z_{ER}} \right)^{-1} $$<br><br>

                  Rail Voltage with the masts in series:<br>
                  $$ V_R = I_F \times \left({1 \over Z_{RET}} + {1 \over Z_{ER} + Z_{MT}} \right)^{-1} $$<br><br>

                  Where if L<sub>C</sub> is divisible by L<sub>M</sub> without a remainder:

                  $$ Z_{MT} = \left({1 \over Z_{MT}} + {1 \over {Z_M \over L_C/L_M}}  \right)^{-1}  $$

                  <b>Note.</b> Z<sub>MT</sub> starts of as an infinite number, reducing each time it is parallelled.<br><br>

                  The last approach is probably the closest to being correct. The return impedance calculation from the previous section has a slight modification.
                  The mast impedance Z<sub>MT</sub> is parallalled with the AEW impedance Z<sub>AEW</sub>.<br>

                  $$ {Z_{RET} =} \left({1 \over Z_R \times L_{XBP}} + \left( \left({K_{RR} \times K_T \over Z_R \times L_{XB}} + {1 \over \color{red}{\left((Z_{AEW} \times L_{XB})^{-1} + (1 / Z_{MT}) \right)^{-1}}} + {1 \over Z_{RSC} \times L_{XB}} \right)^{-1} + Z_R \times (L_{XBP} - L_{XB}) \right)^{-1} \right)^{-1} $$

                  <br>The rail voltage then uses the same equation as the first one, using the updated Z<sub>RET</sub> value.

                 
                </p>
              </div></li>
            </ol>
            <script defer type="text/x-mathjax-config">
               MathJax.Hub.Config({
                extensions: ["tex2jax.js"],
                tex2jax: {
                  inlineMath: [ ['$','$'], ["\\(","\\)"] ],
                  displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
                  processEscapes: true
                },
                "CommonHTML": { linebreaks: { automatic: true } }
                });
            </script>
          </div>
        </div>
      </div>
    </div>
    <div id="copyright">
      <ul>
        <li>&copy; Hans Juneby</li>
      </ul>
    </div>
  </body>
</html>